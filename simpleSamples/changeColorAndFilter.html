<html>

<head>
  <title>Change Color and Filter</title>

	<!-- Dependencies -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="http://XYZ YOUR ZOOMDATA SERVER HERE/zoomdata/sdk/2.0/zoomdata-client.js"></script>
  <link rel="stylesheet" type="text/css" href="simplesample.css" />
</head>



<body>

	<!-- The JS code for the visualization specifies that it
	render on the HTML element with id='visualization'.-->
  <div>
 <h1>Lorem zoomium zipium</h1>

<div style="display:inline-block">
  <div id="visualization" style="width: 300px; height:300px; padding:10px; top:20%; float:left">
    <div style="top:90%">
      <input id="changeColor" type="submit" value="Change Color" />
      <input id="changeFilter" type="submit" value="Change Filter" />
    </div>
  </div>
  <img src="http://www.zoomdata.com/sites/default/files/textWireframe-300x300.png" />
</div>

<div style="display:inline-block">
  <img style="margin-right:15px" src="http://www.zoomdata.com/sites/default/files/textWireframe-300x300.png" />
  <img src="http://www.zoomdata.com/sites/default/files/textWireframe-300x300.png" />
</div>
</div>

	<script type="text/javascript">

		// Set up the filters that the changeFilter button
    // will rotate through
    var filterNum = 0;
    var filterSet = [
        {
            operation: 'IN',
            path: 'group',
            value: ['Women', 'Men']
        },
        {
            operation: 'NOTIN',
            path: 'group',
            value: ['Women', 'Men']
        },
        {
          operation: 'IN',
          path: 'group',
          value: ['Men', 'Electronics', 'Jewelry']
        },
        {
          operation: 'NOTIN',
          path: 'group',
          value: ['Men', 'Electronics', 'Jewelry']
        }
    ];

    // Set up the colors that the changeColor button
    // will rotate through
    var appColorCtr = 0;
    var appColors = ["ZoomPalette", "YlGn", "Purples", "Reds", "Oranges", "Blues", "Greys"];


    // Application configuration settings
    // secure: a boolean value, with true indicating
    //    HTTPS should be used; false indicates HTTP
    // host: the URL of the Zoomdata server
    // port: the port used by the Zoomdata server
    // path: extension used by the Zoomdata server
    var applicationConfig = {
      secure: XYZ - YOUR SECURITY SETTING HERE,
      host: 'XYZ - YOUR URL HERE',
      port: XYZ - YOUR PORT HERE,
      path: '/zoomdata'
    };

		// Query configuration parameters
    var queryConfig = {
                tz: 'UTC',
                filters: [filterSet[filterNum]],
    };

		// Security parameters
    var credentialsConfig = {
        key: "XYZ - YOUR SECURITY KEY HERE"
    };

		// Visualization location
		var vizLocation = document.getElementById('visualization');

    ZoomdataSDK.createClient({
                    credentials: credentialsConfig,
                    application: applicationConfig
                })
                .then(function(client) {
                  window.client = client;
                  return(client);
                })
                .then( function(client) {
                  // client.visualize generates the visualization
                  // element: the HTML element to which the
                  //    visualization is linked
                  // config: query configuration
                  // source: data source
                  // visualization: the chart template to use for the
                  //    visualization
                  // variables: each variable is a value or a string-
                  //    encoded JSON object
                  client.visualize({
                    element: vizLocation,
                    config: queryConfig,
                    source: {name: 'Real Time Sales'},
                    visualization: 'Packed Bubbles',
                    variables: {
                         'Size': 'count',
                         'Group By': '{"name":"group","limit":10,"sort":{"name":"count","dir":"desc"},"groupColorSet":"ZoomPalette","autoShowColorLegend":true,"colorLegendPosition":"{\\"top\\":\\"auto\\",\\"left\\":\\"auto\\",\\"bottom\\":20,\\"right\\":9.53125}","groupColors":{"Parrot":"#000000"}}'
                       }
                 })
                 .done(function(result) {
                   window.viz = result;
                 });
               });

               // event handler rotates the chart through color palettes
               // when its button is clicked
               $('#changeColor').on('click', function() {
                    appColorCtr = (appColorCtr+1) % appColors.length;
                    window.viz["dataAccessors"]["Bubble Color"].setColorSet(appColors[appColorCtr]);
                });

                // event handler rotates the chart through filters when
                // its button is clicked
                $('#changeFilter').on('click', function() {
                    filterNum = (filterNum+1) % filterSet.length;
                    window.viz.filters.add(filterSet[filterNum]);
                });

	</script>

</body>
</html>
